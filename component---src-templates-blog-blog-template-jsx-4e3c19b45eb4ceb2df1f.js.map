{"version":3,"sources":["webpack://datavizhub-tuos/./src/templates/blog/blogTemplate.jsx","webpack://datavizhub-tuos/./src/utils/hooks/backgroundMovement.jsx"],"names":["allMdx","data","pageContext","useState","tagMenu","toggleTagMenu","handleTagMenu","screen","width","document","querySelector","scrollIntoView","backgroundMovement","title","keywords","className","currentPage","id","style","background","Bg","backgroundPosition","backgroundSize","backgroundAttachment","cascade","top","delay","textShadow","maxWidth","Link","to","pageType","elementId","parent","xFactor","yFactor","x","y","location","setLocation","getTranslateValues","useCallback","element","getComputedStyle","matrix","transform","MozTransform","undefined","matArr","replace","split","parseInt","useEffect","onMouseMove","event","xMove","clientX","yMove","clientY","translateValues","transition","hoverElement","parentElement","addEventListener","left","removeEventListener"],"mappings":"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","file":"component---src-templates-blog-blog-template-jsx-4e3c19b45eb4ceb2df1f.js","sourcesContent":["import React, { useState } from \"react\"\r\nimport { graphql, Link } from \"gatsby\"\r\nimport BlogLayout from \"../../components/blog/blogLayout\"\r\nimport MenuCategory from \"../../components/blog/menuCategory\"\r\nimport PropTypes from \"prop-types\"\r\nimport SEO from \"../../components/shared/seo\"\r\nimport Flip from 'react-reveal/Flip'\r\nimport { GreyButton } from \"../../components/style/styleComponent\"\r\nimport Bg from \"../../images/blog/colorful-world.jpg\"\r\nimport { backgroundMovement } from \"../../utils/hooks/backgroundMovement\"\r\n\r\nconst blogTemplate = ({ data: {allMdx}, pageContext }) => {\r\n\tconst [tagMenu, toggleTagMenu] = useState(false);\r\n\r\n\tfunction handleTagMenu() {\r\n\t\ttoggleTagMenu(!tagMenu);\r\n\t\t\r\n\t\tif(screen.width <= 1280 && tagMenu === false) {\r\n\t\t\tvar element = document.querySelector('#tagMenu');\r\n\t\t\telement.scrollIntoView(); \r\n\t\t}\r\n\t}\r\n\r\n\tbackgroundMovement(\"blogBackground\");\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SEO \r\n\t\t\t\t\ttitle=\"Blog\" \r\n\t\t\t\t\tkeywords={[\"the university of sheffield\", \"data visualisation\", \"data visualisation hub\", \"research\"]} \r\n\t\t\t/>\r\n\t\t\t{/* Height={`${pageContext.currentPage != 1 ? `50vh` : ``}`} */}\r\n\t\t\t<div \r\n\t\t\t\tclassName={`${pageContext.currentPage != 1 ? \"min-h-60\" : \"min-h-100\"} w-full overflow-hidden flex flex-col items-center justify-center text-center relative z-10`} \r\n\t\t\t>\r\n\t\t\t\t<div \r\n\t\t\t\t\tid=\"blogBackground\"\r\n\t\t\t\t\tclassName=\"absolute top-0 left-0 w-full h-full transform scale-110\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackground: `linear-gradient(0deg, rgba(255, 255, 255, 0.70), rgba(255, 255, 255, 0.70)), url(${Bg})`,\r\n\t\t\t\t\t\tbackgroundPosition: 'center',\r\n\t\t\t\t\t\tbackgroundSize: 'cover',\r\n\t\t\t\t\t\tbackgroundAttachment: 'fixed'\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Flip cascade top delay={700}>\r\n\t\t\t\t\t<div className=\"text-black\" style={{textShadow: \"#fff 0px 0px 5px\"}}>\t\r\n\t\t\t\t\t\t<h1 className=\"text-6xl font-extrabold\">Blog</h1>\r\n\t\t\t\t\t\t<p className=\"text-md font-semibold mt-5 px-5\" style={{maxWidth: '500px'}}>&ldquo;The greatest value of a picture is when it forces us to notice what we never expected to see.&rdquo; - John W. Tukey</p> \r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Flip>\r\n\t\t\t\t<Flip cascade top delay={700} >\r\n\t\t\t\t\t<div className={`${pageContext.currentPage !== 1 ? 'hidden' : ''}`}>\r\n\t\t\t\t\t\t<MenuCategory \r\n\t\t\t\t\t\t\tpageContext = {pageContext} \t\t\t\t\r\n\t\t\t\t\t\t\thandleTagMenu={handleTagMenu} \r\n\t\t\t\t\t\t\ttagMenu={tagMenu} \r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div className=\"mt-10\">\r\n\t\t\t\t\t\t\t<Link to=\"/blog#read\">\r\n\t\t\t\t\t\t\t\t<GreyButton className=\"text-sm bg-gray-700 text-white hover:bg-black\">Start reading</GreyButton>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Flip>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\r\n\t\t\t{/* blog posts & tag menu */}\r\n\t\t\t<BlogLayout \r\n\t\t\t\tallMdx={allMdx} \r\n\t\t\t\tpageContext={pageContext} \r\n\t\t\t\tpageType={\"/blog\"}\t\r\n\t\t\t\thandleTagMenu={handleTagMenu} \r\n\t\t\t\ttagMenu={tagMenu}\r\n\t\t\t/>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default blogTemplate\r\n\r\nblogTemplate.propTypes = {\r\n\t\tpageContext: PropTypes.any,\r\n\t\tdata: PropTypes.any\r\n}\r\n\r\nexport const query = graphql`\r\n\tquery blogList($skip: Int!, $limit: Int!) {\r\n\t\tallMdx(\r\n\t\t\tfilter: { frontmatter: { type: { eq: null }, published: {ne: false} } }\r\n\t\t\tsort: { fields: [frontmatter___date], order: DESC }\r\n\t\t\tlimit: $limit\r\n\t\t\tskip: $skip\r\n\t\t) {\r\n\t\t\tedges {\r\n\t\t\t\tnode {\r\n\t\t\t\t\tid\r\n\t\t\t\t\tfrontmatter {\r\n\t\t\t\t\t\t...MdxFrontmatter\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfields {\r\n\t\t\t\t\t\t...MdxFields\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n`","import { useState, useEffect, useCallback } from 'react';\r\n\r\n/**  \r\n* Move background on mouse movement\r\n* @elementId string: background element\r\n* @parent boolean: whether to move background on mouse hovering parent element of 'elementId'\r\n* Make sure to add the style overflow: hidden to parent/element, and add the style transform: scale(1.1) to the element\r\n*/\r\nexport function backgroundMovement(elementId, parent = true, xFactor = 0.06, yFactor = 0.05) {\r\n  const [location, setLocation] = useState({ x: 0, y: 0 });\r\n  //const xLocation = useRef(0);\r\n  //const yLocation = useRef(0);\r\n\r\n\r\n  const getTranslateValues = useCallback((element) => {\r\n    const style = getComputedStyle(element);\r\n    const matrix = style.transform || style.MozTransform;\r\n\r\n    if ( typeof matrix == undefined || !matrix || matrix == 'none') {\r\n      return {\r\n        x: 0,\r\n        y: 0\r\n      }\r\n    }\r\n\r\n    const matArr = matrix.replace(/[^0-9\\-.,]/g, '').split(',');\r\n    // 3D: index 12 and 13\r\n    // 2D: index 4 and 5\r\n    return {\r\n      x: parseInt(matArr[12]) || parseInt(matArr[4]),\r\n      y: parseInt(matArr[13]) || parseInt(matArr[5])\r\n    }\r\n  })\r\n\r\n\r\n  useEffect(\r\n    () => {\r\n      const onMouseMove = (event) => {\r\n        // calculate mouse movement\r\n        let xMove = event.clientX - location.x;\r\n        let yMove = event.clientY - location.y;\r\n\r\n        // update mouse location\r\n        setLocation({ x: event.clientX, y:event.clientY });\r\n        // xLocation.current = event.clientX;\r\n        // yLocation.current = event.clientY;\r\n        \r\n        // move background according to difference\r\n        let translateValues = getTranslateValues(background);\r\n        background.style.transform = `translate(${-xFactor * xMove + translateValues.x}px, ${-yFactor * yMove + translateValues.y}px) scale(1.1)`;\r\n      }; \r\n\r\n      var background = document.querySelector(`#${elementId}`);\r\n      if (!background) {\r\n        return;\r\n      }\r\n      background.style.transition = \"none\";\r\n      var hoverElement = background;\r\n\r\n      if (parent === true) {\r\n        hoverElement = background.parentElement;\r\n      }\r\n      \r\n      hoverElement.addEventListener(\"mousemove\", onMouseMove);\r\n      hoverElement.addEventListener(\"mouseleave\", () => {\r\n        background.style.transition = \".5s ease\";\r\n        background.style.top = 0;\r\n        background.style.left = 0;\r\n      });\r\n\r\n      // Remove event listeners on cleanup\r\n      return () => {\r\n        if (background) {\r\n          hoverElement.removeEventListener(\"mousemove\", onMouseMove);\r\n          hoverElement.removeEventListener(\"mouseleave\", () => {\r\n            background.style.transition = \"none\";\r\n          });\r\n        }\r\n      };\r\n    },\r\n    [location, getTranslateValues]\r\n  );\r\n  return location;\r\n}"],"sourceRoot":""}