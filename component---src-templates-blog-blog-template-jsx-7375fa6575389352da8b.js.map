{"version":3,"sources":["webpack://datavizhub-tuos/./src/templates/blog/blogTemplate.jsx","webpack://datavizhub-tuos/./src/utils/hooks/backgroundMovement.jsx"],"names":["allMdx","data","pageContext","useState","tagMenu","toggleTagMenu","handleTagMenu","screen","width","document","querySelector","scrollIntoView","backgroundMovement","title","keywords","className","currentPage","id","style","background","Bg","backgroundPosition","backgroundSize","backgroundAttachment","cascade","top","delay","textShadow","maxWidth","Link","to","pageType","elementId","parent","xFactor","yFactor","x","y","location","setLocation","useEffect","onMouseMove","event","xMove","clientX","yMove","clientY","translateValues","element","getComputedStyle","matrix","transform","MozTransform","undefined","matArr","replace","split","parseInt","getTranslateValues","transition","hoverElement","parentElement","addEventListener","left","removeEventListener"],"mappings":"8OAkFA,UAvEqB,SAAC,GAAqC,IAA5BA,EAA2B,EAAlCC,KAAOD,OAASE,EAAkB,EAAlBA,YACvC,GAAiCC,eAAS,GAAnCC,EAAP,KAAgBC,EAAhB,KAEA,SAASC,KACRD,GAAeD,GAEZG,OAAOC,OAAS,OAAoB,IAAZJ,IACZK,SAASC,cAAc,YAC7BC,iBAMV,OAFAC,OAAmB,mBAGlB,yBACC,QAAC,IAAD,CACEC,MAAM,OACNC,SAAU,CAAC,8BAA+B,qBAAsB,yBAA0B,eAG5F,eACCC,WAAyC,GAA3Bb,EAAYc,YAAmB,WAAa,aAAjD,gGAET,eACCC,GAAG,iBACHF,UAAU,0DACVG,MAAO,CACNC,WAAW,oFAAqFC,IAAtF,IACVC,mBAAoB,SACpBC,eAAgB,QAChBC,qBAAsB,YAKxB,QAAC,IAAD,CAAMC,SAAO,EAACC,KAAG,EAACC,MAAO,MACxB,eAAKX,UAAU,aAAaG,MAAO,CAACS,WAAY,sBAC/C,cAAIZ,UAAU,2BAAd,SACA,aAAGA,UAAU,kCAAkCG,MAAO,CAACU,SAAU,UAAjE,sHAGF,QAAC,IAAD,CAAMJ,SAAO,EAACC,KAAG,EAACC,MAAO,MACxB,eAAKX,UAA0C,IAA5Bb,EAAYc,YAAoB,SAAW,KAC7D,QAAC,IAAD,CACCd,YAAeA,EACfI,cAAeA,EACfF,QAASA,KAEV,eAAKW,UAAU,UACd,QAAC,EAAAc,KAAD,CAAMC,GAAG,eACR,QAAC,KAAD,CAAYf,UAAU,iDAAtB,uBASL,QAAC,IAAD,CACCf,OAAQA,EACRE,YAAaA,EACb6B,SAAU,QACVzB,cAAeA,EACfF,QAASA,O,gFCpEN,SAASQ,EAAmBoB,EAAWC,EAAeC,EAAgBC,QAAgB,IAA/CF,OAAS,QAAsC,IAAhCC,MAAU,UAAsB,IAAhBC,MAAU,KAErF,OAAgChC,cAAS,CAAEiC,EAAG,EAAGC,EAAG,IAA7CC,EAAP,KAAiBC,EAAjB,KAuEA,OA9CAC,gBACE,WACE,IAAMC,EAAc,SAACC,GAEnB,IAAIC,EAAQD,EAAME,QAAUN,EAASF,EACjCS,EAAQH,EAAMI,QAAUR,EAASD,EAGrCE,EAAY,CAAEH,EAAGM,EAAME,QAASP,EAAEK,EAAMI,UAGxC,IAAIC,EAhCV,SAA4BC,GAC1B,IAAM9B,EAAQ+B,iBAAiBD,GACzBE,EAAShC,EAAMiC,WAAajC,EAAMkC,aAExC,GAAsBC,aAAVH,IAAwBA,GAAoB,QAAVA,EAC5C,MAAO,CACLd,EAAG,EACHC,EAAG,GAIP,IAAMiB,EAASJ,EAAOK,QAAQ,cAAe,IAAIC,MAAM,KAGvD,MAAO,CACLpB,EAAGqB,SAASH,EAAO,MAAQG,SAASH,EAAO,IAC3CjB,EAAGoB,SAASH,EAAO,MAAQG,SAASH,EAAO,KAgBnBI,CAAmBvC,GACzCA,EAAWD,MAAMiC,UAAjB,eAA2CjB,EAAUS,EAAQI,EAAgBX,GAA7E,SAAsFD,EAAUU,EAAQE,EAAgBV,GAAxH,kBAGElB,EAAaV,SAASC,cAAT,IAA2BsB,GAC5C,GAAKb,EAAL,CAGAA,EAAWD,MAAMyC,WAAa,OAC9B,IAAIC,EAAezC,EAcnB,OAZe,IAAXc,IACF2B,EAAezC,EAAW0C,eAG5BD,EAAaE,iBAAiB,YAAarB,GAC3CmB,EAAaE,iBAAiB,cAAc,WAC1C3C,EAAWD,MAAMyC,WAAa,WAC9BxC,EAAWD,MAAMO,IAAM,EACvBN,EAAWD,MAAM6C,KAAO,KAInB,WACD5C,IACFyC,EAAaI,oBAAoB,YAAavB,GAC9CmB,EAAaI,oBAAoB,cAAc,WAC7C7C,EAAWD,MAAMyC,WAAa,eAMtC,CAACrB,IAEIA","file":"component---src-templates-blog-blog-template-jsx-7375fa6575389352da8b.js","sourcesContent":["import React, {useState} from \"react\"\nimport { graphql, Link } from \"gatsby\"\nimport BlogLayout from \"../../components/blog/blogLayout\"\nimport MenuCategory from \"../../components/blog/menuCategory\"\nimport PropTypes from \"prop-types\"\nimport SEO from \"../../components/shared/seo\"\nimport Flip from 'react-reveal/Flip'\nimport { GreyButton } from \"../../components/style/styled\"\nimport Bg from \"../../images/blog/colorful-world.jpg\"\nimport { backgroundMovement } from \"../../utils/hooks/backgroundMovement\"\n\nconst blogTemplate = ({ data: {allMdx}, pageContext }) => {\n\tconst [tagMenu, toggleTagMenu] = useState(false);\n\n\tfunction handleTagMenu() {\n\t\ttoggleTagMenu(!tagMenu);\n\t\t\n\t\tif(screen.width <= 1280 && tagMenu === false) {\n\t\t\tvar element = document.querySelector('#tagMenu');\n\t\t\telement.scrollIntoView(); \n\t\t}\n\t}\n\n\tbackgroundMovement(\"blogBackground\");\n\n\treturn (\n\t\t<>\n\t\t\t<SEO \n\t\t\t\t\ttitle=\"Blog\" \n\t\t\t\t\tkeywords={[\"the university of sheffield\", \"data visualisation\", \"data visualisation hub\", \"research\"]} \n\t\t\t/>\n\t\t\t{/* Height={`${pageContext.currentPage != 1 ? `50vh` : ``}`} */}\n\t\t\t<div \n\t\t\t\tclassName={`${pageContext.currentPage != 1 ? \"min-h-60\" : \"min-h-100\"} w-full overflow-hidden flex flex-col items-center justify-center text-center relative z-10`} \n\t\t\t>\n\t\t\t\t<div \n\t\t\t\t\tid=\"blogBackground\"\n\t\t\t\t\tclassName=\"absolute top-0 left-0 w-full h-full transform scale-110\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbackground: `linear-gradient(0deg, rgba(255, 255, 255, 0.70), rgba(255, 255, 255, 0.70)), url(${Bg})`,\n\t\t\t\t\t\tbackgroundPosition: 'center',\n\t\t\t\t\t\tbackgroundSize: 'cover',\n\t\t\t\t\t\tbackgroundAttachment: 'fixed'\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t</div>\n\n\t\t\t\t<Flip cascade top delay={700}>\n\t\t\t\t\t<div className=\"text-black\" style={{textShadow: \"#fff 0px 0px 5px\"}}>\t\n\t\t\t\t\t\t<h1 className=\"text-6xl font-extrabold\">Blog</h1>\n\t\t\t\t\t\t<p className=\"text-md font-semibold mt-5 px-5\" style={{maxWidth: '500px'}}>&ldquo;The greatest value of a picture is when it forces us to notice what we never expected to see.&rdquo; - John W. Tukey</p> \n\t\t\t\t\t</div>\n\t\t\t\t</Flip>\n\t\t\t\t<Flip cascade top delay={700} >\n\t\t\t\t\t<div className={`${pageContext.currentPage !== 1 ? 'hidden' : ''}`}>\n\t\t\t\t\t\t<MenuCategory \n\t\t\t\t\t\t\tpageContext = {pageContext} \t\t\t\t\n\t\t\t\t\t\t\thandleTagMenu={handleTagMenu} \n\t\t\t\t\t\t\ttagMenu={tagMenu} \n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"mt-10\">\n\t\t\t\t\t\t\t<Link to=\"/blog#read\">\n\t\t\t\t\t\t\t\t<GreyButton className=\"text-sm bg-gray-700 text-white hover:bg-black\">Start reading</GreyButton>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Flip>\n\t\t\t\t\n\t\t\t</div>\n\n\t\t\t{/* blog posts & tag menu */}\n\t\t\t<BlogLayout \n\t\t\t\tallMdx={allMdx} \n\t\t\t\tpageContext={pageContext} \n\t\t\t\tpageType={\"/blog\"}\t\n\t\t\t\thandleTagMenu={handleTagMenu} \n\t\t\t\ttagMenu={tagMenu}\n\t\t\t/>\n\t\t</>\n\t)\n}\n\nexport default blogTemplate\n\nblogTemplate.propTypes = {\n\t\tpageContext: PropTypes.any,\n\t\tdata: PropTypes.any\n}\n\nexport const query = graphql`\n\tquery blogList($skip: Int!, $limit: Int!) {\n\t\tallMdx(\n\t\t\tfilter: { frontmatter: { type: { eq: null }, isPublished: {ne: false} } }\n\t\t\tsort: { fields: [frontmatter___date], order: DESC }\n\t\t\tlimit: $limit\n\t\t\tskip: $skip\n\t\t) {\n\t\t\t...MdxEdge\n\t\t}\n\t}\n`","import { useState, useEffect } from 'react';\n\n/**  \n* Move background on mouse movement\n* @elementId string: background element\n* @parent boolean: whether to move background on mouse hovering parent element of 'elementId'\n* Make sure to add the style overflow: hidden to parent/element, and add the style transform: scale(1.1) to the element\n*/\nexport function backgroundMovement(elementId, parent = true, xFactor = 0.06, yFactor = 0.05) {\n  // Keep track of script status (\"idle\", \"loading\", \"ready\", \"error\")\n  const [location, setLocation] = useState({ x: 0, y: 0 });\n\n\n\n  function getTranslateValues(element) {\n    const style = getComputedStyle(element);\n    const matrix = style.transform || style.MozTransform;\n\n    if ( typeof matrix == undefined || !matrix || matrix == 'none') {\n      return {\n        x: 0,\n        y: 0\n      }\n    }\n\n    const matArr = matrix.replace(/[^0-9\\-.,]/g, '').split(',');\n    // 3D: index 12 and 13\n    // 2D: index 4 and 5\n    return {\n      x: parseInt(matArr[12]) || parseInt(matArr[4]),\n      y: parseInt(matArr[13]) || parseInt(matArr[5])\n    }\n  } \n\n\n  useEffect(\n    () => {\n      const onMouseMove = (event) => {\n        // calculate mouse movement\n        let xMove = event.clientX - location.x;\n        let yMove = event.clientY - location.y;\n\n        // update mouse location\n        setLocation({ x: event.clientX, y:event.clientY });\n        \n        // move background according to difference\n        let translateValues = getTranslateValues(background);\n        background.style.transform = `translate(${-xFactor * xMove + translateValues.x}px, ${-yFactor * yMove + translateValues.y}px) scale(1.1)`;\n      }; \n\n      var background = document.querySelector(`#${elementId}`);\n      if (!background) {\n        return;\n      }\n      background.style.transition = \"none\";\n      var hoverElement = background;\n\n      if (parent === true) {\n        hoverElement = background.parentElement;\n      }\n      \n      hoverElement.addEventListener(\"mousemove\", onMouseMove);\n      hoverElement.addEventListener(\"mouseleave\", () => {\n        background.style.transition = \".5s ease\";\n        background.style.top = 0;\n        background.style.left = 0;\n      });\n\n      // Remove event listeners on cleanup\n      return () => {\n        if (background) {\n          hoverElement.removeEventListener(\"mousemove\", onMouseMove);\n          hoverElement.removeEventListener(\"mouseleave\", () => {\n            background.style.transition = \"none\";\n          });\n          // hoverElement.removeEventListener(\"mouseenter\", () => {});\n        }\n      };\n    },\n    [location]\n  );\n  return location;\n}"],"sourceRoot":""}